<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Database Management</title>
  <link rel="stylesheet" href="shared.css" />
  <style>
    body { padding: 20px; max-width: 800px; margin: auto; }
    .status-box { margin-top: 20px; padding: 15px; border: 1px solid var(--edge); border-radius: 8px; background: var(--panel); min-height: 120px; }
    #progressCount { font-weight: bold; margin-top: 8px; }
    .queue-item { background: var(--panel); border: 1px solid var(--edge); padding: 5px 10px; border-radius: 6px; display: inline-block; margin: 4px; }
    #importStatus.error { color: #ff7676; }
  </style>
</head>
<body>
  <h2>Database Management</h2>

  <section class="section">
    <h4>Imported Labels</h4>
    <div id="imported-labels-list" class="label-list">
      <div class="small">Loading...</div>
    </div>
  </section>

  <section class="section">
    <h4>Import Cached Releases from CSV</h4>
    <div class="controls">
      <input id="csvFileInput" type="file" accept=".csv,text/csv" class="input" />
      <button class="btn" id="importCsvBtn">Import CSV</button>
    </div>
    <div id="importStatus" class="small"></div>
  </section>

  <section class="section">
      <h4>Step 1: Add Labels to Queue</h4>
      <div class="controls">
        <input id="labelIdInput" class="input" placeholder="Paste Discogs Label ID..." />
        <button class="btn" id="addToQueueBtn">Add to Queue</button>
      </div>
  </section>

  <section class="section">
      <h4>Step 2: Process Queue</h4>
      <div id="queue-list" style="margin-bottom: 15px;">
        <div class="small">Queue is empty.</div>
      </div>
      <button class="btn" id="processQueueBtn" disabled>Process Queue</button>
      <button class="btn" id="clearQueueBtn" style="display:none;">Clear Queue</button>
  </section>

  <div class="status-box">
    <h3>Status</h3>
    <div class="small">Overall Queue Progress</div>
    <div id="overallProgressWrap" style="margin-top: 5px; margin-bottom: 10px; height: 8px; background:#0f141a; border:1px solid var(--edge); border-radius:6px; overflow:hidden;"><div id="overallProgressBar" style="width:0%; height:100%; background: var(--accent);"></div></div>

    <div id="statusText" class="small">Ready.</div>
    <div id="progressCount" class="small"></div>
    <div id="progressWrap" style="margin-top: 5px;"><div id="progressBar"></div></div>
    <div id="resume-controls" style="margin-top: 15px; display: none;">
        <div class="small">Process paused due to API limit. It will resume automatically.</div>
        <div id="resume-timer" class="small">Resuming in 60s...</div>
    </div>
  </div>

  <section class="section">
    <h4>Maintenance</h4>
    <button class="btn" id="findMissingBtn">Find & Fetch Missing Release Details</button>
  </section>

  <script src="database.js"></script>
</body>
</html>
